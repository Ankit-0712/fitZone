<div class="categories-container">
  <!-- Header Section -->
  <div class="header-section">
    <h2>Workout Categories</h2>
    <p>Select a muscle group to explore targeted exercises and learn with animated demos.</p>
  </div>

  <!-- Categories Grid -->
  <div class="categories-section" *ngIf="!selectedCategory">
    <div class="categories-grid">
      <div 
        class="category-card" 
        *ngFor="let category of categories" 
        [style.borderColor]="category.color"
        (click)="selectCategory(category)"
      >
        <div class="category-info">
          <h3>{{ category.name }}</h3>
          <p class="exercise-count">{{ category.exercises.length }} exercises</p>
        </div>
        <div class="category-overlay">
          <span class="explore-text">Explore</span>
        </div>
      </div>
    </div>
    
    <!-- Additional content to fill space -->
    <div class="categories-stats">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-number">{{ getTotalExercises() }}</div>
          <div class="stat-label">Total Exercises</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">{{ categories.length }}</div>
          <div class="stat-label">Workout Categories</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">{{ getTotalMuscleGroups() }}</div>
          <div class="stat-label">Muscle Groups</div>
        </div>
      </div>
      
      <div class="workout-tips">
        <h3>üí™ Fitness Tips</h3>
        <div class="tips-grid">
          <div class="tip-card">
            <h4>Consistency is Key</h4>
            <p>Regular workouts are more effective than occasional intense sessions.</p>
          </div>
          <div class="tip-card">
            <h4>Proper Form First</h4>
            <p>Focus on correct technique before increasing weight or reps.</p>
          </div>
          <div class="tip-card">
            <h4>Rest & Recovery</h4>
            <p>Give your muscles time to repair and grow stronger.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Selected Category Section -->
  <div class="selected-category-section" *ngIf="selectedCategory">
    <!-- Back Navigation -->
    <div class="back-navigation">
      <button class="back-btn" (click)="goBack()">
        <span class="back-icon">‚Üê</span>
        Back to Categories
      </button>
    </div>

    <!-- Category Header -->
    <div class="category-header" [style.borderColor]="selectedCategory.color">
      <div class="category-header-content">
        <div class="category-header-info">
          <h2>{{ selectedCategory.name }} Workouts</h2>
          <p>{{ selectedCategory.exercises.length }} exercises to strengthen your {{ selectedCategory.name.toLowerCase() }}</p>
        </div>
      </div>
    </div>

    <!-- Exercises Grid -->
    <div class="exercises-section">
      <div class="exercises-grid">
        <div 
          class="exercise-card" 
          *ngFor="let exercise of selectedCategory.exercises"
          (click)="openExerciseDetails(exercise)"
          [class.expanded]="selectedExercise === exercise"
        >

          <div class="exercise-info">
            <h5>{{ exercise.name }}</h5>
            <div class="exercise-meta">
              <span class="difficulty" [ngClass]="getDifficultyClass(exercise.difficulty)">{{ exercise.difficulty }}</span>
              <span class="equipment" *ngFor="let eq of exercise.equipment">{{ eq }}</span>
            </div>
            <div class="muscle-groups">
              <span class="muscle-tag" *ngFor="let muscle of exercise.muscleGroups">{{ muscle }}</span>
            </div>
            <p class="exercise-desc">{{ exercise.description }}</p>
          </div>
          <div class="exercise-action">
            <span class="view-details">View Details</span>
          </div>


        </div>
      </div>
      
      <div class="exercises-tip">
        <div class="tip-content">
          <p>Click any exercise to see detailed instructions and proper form guidance!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Exercise Modal Popup -->
  <div class="exercise-modal" *ngIf="selectedExercise" (click)="closeExerciseModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="modal-close-btn" (click)="closeExerciseModal()">‚úï</button>
      
      <div class="modal-header">
        <h2>{{ selectedExercise.name }}</h2>
        <div class="exercise-meta">
          <span class="difficulty" [ngClass]="getDifficultyClass(selectedExercise.difficulty)">
            {{ selectedExercise.difficulty }}
          </span>
          <span class="equipment" *ngFor="let eq of selectedExercise.equipment">
            {{ eq }}
          </span>
        </div>
      </div>

      <div class="modal-body">
        <div class="exercise-animation-container">
          <img 
            [src]="getExerciseGif(selectedExercise.name)" 
            [alt]="selectedExercise.name + ' animation'" 
            class="exercise-gif"
            *ngIf="hasGifAnimation(selectedExercise.name)"
          />
          <div class="no-animation-placeholder" *ngIf="!hasGifAnimation(selectedExercise.name)">
            <span>No animation available</span>
          </div>
        </div>

        <div class="exercise-details">
          <div class="muscle-groups">
            <h4>Target Muscles:</h4>
            <div class="muscle-tags">
              <span class="muscle-tag" *ngFor="let muscle of selectedExercise.muscleGroups">
                {{ muscle }}
              </span>
            </div>
          </div>

          <div class="exercise-description">
            <h4>Description:</h4>
            <p>{{ selectedExercise.description }}</p>
          </div>

          <div class="form-instructions" *ngIf="getExerciseFormInstructions(selectedExercise.name).length > 0">
            <h4>How to perform:</h4>
            <ol>
              <li *ngFor="let instruction of getExerciseFormInstructions(selectedExercise.name)">
                {{ instruction }}
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>